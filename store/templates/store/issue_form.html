<script>
    const stockData = {{ stock_data_json|safe }};

    document.addEventListener('DOMContentLoaded', function () {
        const stockSelect = document.getElementById('id_stock_item');
        const infoLabel = document.createElement('span');
        infoLabel.style.marginLeft = '15px';
        stockSelect.parentNode.appendChild(infoLabel);

        stockSelect.addEventListener('change', function () {
            const itemId = this.value;
            const remaining = stockData[itemId];
            if (remaining !== undefined) {
                infoLabel.innerText = `Remaining: ${remaining}`;
            } else {
                infoLabel.innerText = '';
            }
        });
    });
</script>
