<form method="post">
    {% csrf_token %}
    {{ form.as_p }}

    <label id="stock-remaining-label" class="form-text text-muted" style="display:none;">
        Remaining Quantity: <span id="stock-remaining"></span>
    </label>

    <button type="submit" class="btn btn-primary">Save</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const stockSelect = document.querySelector('#id_stock_item');
        const stockLabel = document.getElementById('stock-remaining-label');
        const stockQtySpan = document.getElementById('stock-remaining');

        // This would be populated by Django context in real use
        const stockData = {{ stock_data_json|safe }};

        function updateStockInfo() {
            const selectedId = stockSelect.value;
            if (selectedId && stockData[selectedId]) {
                stockQtySpan.textContent = stockData[selectedId];
                stockLabel.style.display = 'block';
            } else {
                stockLabel.style.display = 'none';
            }
        }

        stockSelect.addEventListener('change', updateStockInfo);
        updateStockInfo();  // on load
    });
</script>
